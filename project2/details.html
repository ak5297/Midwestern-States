<!-- Alex Ketavongsa 
     Project 2 - details.html
     This gets and displays the selected state based on the object's ID. It is retrieved from the JSON file and the details are
     printed out.
-->

<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css?family=Signika&display=swap" rel="stylesheet">
  <title>Details</title>
  <link rel="stylesheet" href="assets/css/index.css" />
</head>
<body>
  <nav>
    <span><a href="menu.html">Back</a></span>
    <span style="text-align:center">Discover The States of the Midwest!</span>
    <div class="right">
      <span><a href="index.html">Home</a></span>
    </div>
  </nav>
  <main>
    <ul id="item"></ul>
  </main>
    

<script>
  let xmlhttp = new XMLHttpRequest(),
      url = "data.json";
    
  xmlhttp.onreadystatechange = function() {
    if ( xmlhttp.readyState === 4 && xmlhttp.status === 200 ) {
      var menuItems = JSON.parse( xmlhttp.responseText );
      buildItem( menuItems );
    }
  };
  xmlhttp.open( "GET", url, true );
  xmlhttp.send();
  
  function buildItem( items ) {
    var output = "",
        selectedID = localStorage.getItem( "selected" );
    
    items.forEach( function( item ) {
      if ( selectedID == item.objID ) {
          
          output =  "<li class='item'>" +
              "<h3>" + item.state + "</h3>" + 
              "<img class='pic' src=assets/img/" + item.pic +".png>" +
              "<p>Capital: " + item.capital + "</p>" + 
              "<p>Population: " + item.population + "</p>" + 
              "<p>Nickname: " + item.nickname + " </p>" +
              "<p>Fun Fact: " + item.fact + " </p>" + 
            "</li>";
      }
       
    });

    document.getElementById( "item" ).innerHTML = output;
    
  }
</script>


</body>
</html>
